import{_ as r,W as n,X as i,Y as s,Z as a,$ as p,a0 as t,y as o}from"./framework.e8a0537a.js";const l={},c=t('<h1 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍" aria-hidden="true">#</a> 介绍</h1><p>可以让你在你的电脑上以虚拟机的形式运行多个操作系统(至于为什么选择这个，主要是系统已经自带了，所以能不装其他我就先不装其他试试)</p><blockquote><p>Hyper-V 可用于 64 位 Windows 10 专业版、企业版和教育版。 它无法用于家庭版。</p></blockquote><h1 id="准备" tabindex="-1"><a class="header-anchor" href="#准备" aria-hidden="true">#</a> 准备</h1><h2 id="下载系统镜像" tabindex="-1"><a class="header-anchor" href="#下载系统镜像" aria-hidden="true">#</a> 下载系统镜像</h2>',5),m={href:"http://mirrors.aliyun.com/centos/7/isos/x86_64/",target:"_blank",rel:"noopener noreferrer"},g=t(`<p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180141020.png" alt="img" loading="lazy"></p><p>建议下载这个版本，900M最小安装。DVD版本较大，但是里面会有很多东西。</p><h2 id="启用hyper-v" tabindex="-1"><a class="header-anchor" href="#启用hyper-v" aria-hidden="true">#</a> 启用Hyper-v</h2><p>在电脑左下角搜索控制面板</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180141084.png" alt="img" loading="lazy"></p><p>选择程序，然后点击启用或者关闭Windows功能</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180141683.png" alt="img" loading="lazy"></p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180141260.png" alt="img" loading="lazy"></p><p>勾选应用后等待结束后重启系统</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180141495.png" alt="img" loading="lazy"></p><p>在重启结束后可以在电脑上搜索到Hyper-v管理器</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180141290.png" alt="img" loading="lazy"></p><p>下面的步骤就是使用该工具来完成的。</p><h1 id="新建虚拟网络交换机" tabindex="-1"><a class="header-anchor" href="#新建虚拟网络交换机" aria-hidden="true">#</a> 新建虚拟网络交换机</h1><p>打开Hyper-v管理器</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180141456.png" alt="img" loading="lazy"></p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180141529.png" alt="img" loading="lazy"></p><p>然后在这个界面名称具体规定，外部网络选择参考网络连接里面</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180142917.png" alt="img" loading="lazy"></p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180142838.png" alt="img" loading="lazy"></p><h1 id="新建虚拟机" tabindex="-1"><a class="header-anchor" href="#新建虚拟机" aria-hidden="true">#</a> 新建虚拟机</h1><p>右键新建虚拟机</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180142974.png" alt="img" loading="lazy"></p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180142455.png" alt="img" loading="lazy"></p><p>修改一个有意义的名称和设置虚拟机的存储位置(保证有一定的空间)</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180142976.png" alt="img" loading="lazy"></p><p>选择虚拟机的代数，直接下一步</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180142444.png" alt="img" loading="lazy"></p><p>分配内存大小()</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180142516.png" alt="img" loading="lazy"></p><p>根据个人情况进行设置，如果你虚拟机里面要跑的东西比较大，那么就需要配置大一点</p><p>配置网络,下拉列表选择我们配置好的，然后下一步</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180142636.png" alt="img" loading="lazy"></p><p>连接虚拟硬盘</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180142588.png" alt="img" loading="lazy"></p><p>安装选项选择镜像的位置</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180142996.png" alt="img" loading="lazy"></p><p>再次确认我们的安装信息，然后点击完成</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180142277.png" alt="img" loading="lazy"></p><p>查看已经创建的虚拟机</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180142354.png" alt="img" loading="lazy"></p><p>选中点击右侧的启动，然后启动开后点击连接</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180142908.png" alt="img" loading="lazy"></p><h1 id="安装系统" tabindex="-1"><a class="header-anchor" href="#安装系统" aria-hidden="true">#</a> 安装系统</h1><p>启动虚拟机，然后连接后，操作键盘选择Install CentOS7，然后输入enter</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180142000.png" alt="img" loading="lazy"></p><p>进入安装界面，选择安装语言</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/272869/1624724846329-b787d78d-2344-4681-82ff-d89214113a65.png" alt="img" loading="lazy"></p><p>配置安装位置和网络</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180142777.png" alt="img" loading="lazy"></p><p>点击安装位置</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180142786.png" alt="img" loading="lazy"></p><p>配置网络和主机名</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180142133.png" alt="img" loading="lazy"></p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180142258.png" alt="img" loading="lazy"></p><p>然后点击安装</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180142690.png" alt="img" loading="lazy"></p><p>设置root密码，这里根据个人情况设置简单或者复杂的密码</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180142262.png" alt="img" loading="lazy"></p><p>这里就不另外创建用户，直接使用root</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180142141.png" alt="img" loading="lazy"></p><p>安装成功后重启</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180143513.png" alt="img" loading="lazy"></p><p>点击enter进入系统，输入用户名root，密码就是我们刚才设置的密码</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180143904.png" alt="img" loading="lazy"></p><p>输入ls命令查看</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180143598.png" alt="img" loading="lazy"></p><p>尝试ping下百度看是否可以访问外网</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>ping baidu<span class="token punctuation">.</span>com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180143986.png" alt="img" loading="lazy"></p><h1 id="操作" tabindex="-1"><a class="header-anchor" href="#操作" aria-hidden="true">#</a> 操作</h1><h2 id="查看网络配置信息" tabindex="-1"><a class="header-anchor" href="#查看网络配置信息" aria-hidden="true">#</a> 查看网络配置信息</h2><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>ip addr
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这个时候的ip是动态分配的ip地址</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180143188.png" alt="img" loading="lazy"></p><p>如果使用默认的界面不习惯，可以使用第三方终端工具(MovaXterm、shell)进行连接。</p><h2 id="movaxterm基本使用" tabindex="-1"><a class="header-anchor" href="#movaxterm基本使用" aria-hidden="true">#</a> MovaXterm基本使用</h2>`,77),d={href:"https://mobaxterm.mobatek.net/",target:"_blank",rel:"noopener noreferrer"},h=t(`<p>下面简单描述下如何使用，打开MovaXterm工具，新建会话</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180143430.png" alt="img" loading="lazy"></p><p>选择会话类型(支持多种)，这里我们选择SSH</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180143984.png" alt="img" loading="lazy"></p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180143522.png" alt="img" loading="lazy"></p><p>点击好的，然后输入密码进行连接。</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180143144.png" alt="img" loading="lazy"></p><p>上面演示的软件是我学习使用的</p><h2 id="设置静态ip" tabindex="-1"><a class="header-anchor" href="#设置静态ip" aria-hidden="true">#</a> 设置静态IP</h2><p>进入指定目录修改配置,这个里面放的是网络配置</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>cd <span class="token operator">/</span>etc<span class="token operator">/</span>sysconfig<span class="token operator">/</span>network<span class="token operator">-</span>scripts 
ls 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180143875.png" alt="img" loading="lazy"></p><p>使用vm编辑ifcfg-eth0文件</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>vi ifcfg<span class="token operator">-</span>eth0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180143010.png" alt="img" loading="lazy"></p><p>编辑该文件增加或者修改以下配置</p><p>vi基本用法：按i进入编辑模式，保存退出先按esc，然后输入:wq</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>BOOTPROTO<span class="token operator">=</span><span class="token string">&quot;static&quot;</span>  <span class="token preprocessor property">#设置静态ip</span>
ONBOOT<span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>        <span class="token preprocessor property">#设置开机自启</span>
IPADDR<span class="token operator">=</span><span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.8</span> #分配IP，前三个段要和本机保持一致，后一个段要不一样
NETMASK<span class="token operator">=</span><span class="token number">255.255</span><span class="token number">.255</span><span class="token number">.0</span> #和本机保持一致
GATEWAY<span class="token operator">=</span><span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span>   #和本机保持一致
DNS1<span class="token operator">=</span><span class="token number">192.168</span><span class="token number">.1</span><span class="token number">.1</span>      #和网关保持一致，不添加无法上外网
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过cmd查询本机电脑的ip以及子网掩码等</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>ipconfig
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180143829.png" alt="img" loading="lazy"></p><p>修改后如图所示</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180143756.png" alt="img" loading="lazy"></p><p>重启网络服务 使以上配置生效</p><p>这点我是使用hyper-v自带界面运行的。</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code>service network restart 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180143545.png" alt="img" loading="lazy"></p><p>重新查询ip</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180143511.png" alt="img" loading="lazy"></p><p>将我们的MovaXterm连接配置修改为我们修改后的ip地址重新连接，并且测试是否可以访问外网</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180143909.png" alt="img" loading="lazy"></p><p>然后通过本机去ping下我们的服务器，可以正常访问。</p><p><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/202112180143546.png" alt="img" loading="lazy"></p><p>到此，静态ip设置结束。</p><h2 id="防火墙设置" tabindex="-1"><a class="header-anchor" href="#防火墙设置" aria-hidden="true">#</a> 防火墙设置</h2><p>本文示例目前没有用到以下配置</p><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token operator">--</span> 开启防火墙
systemctl start firewalld 

<span class="token operator">--</span> 查看防火墙状态
systemctl status firewalld 

<span class="token operator">--</span> 开启端口
firewall<span class="token operator">-</span>cmd   <span class="token operator">--</span>permanent  <span class="token operator">--</span>zone<span class="token operator">=</span><span class="token keyword">public</span> <span class="token operator">--</span><span class="token keyword">add</span><span class="token operator">-</span>port<span class="token operator">=</span><span class="token number">80</span><span class="token operator">/</span>tcp

firewall<span class="token operator">-</span>cmd   <span class="token operator">--</span>permanent  <span class="token operator">--</span>zone<span class="token operator">=</span><span class="token keyword">public</span> <span class="token operator">--</span><span class="token keyword">add</span><span class="token operator">-</span>port<span class="token operator">=</span><span class="token number">22</span><span class="token operator">/</span>tcp

firewall<span class="token operator">-</span>cmd   <span class="token operator">--</span>permanent  <span class="token operator">--</span>zone<span class="token operator">=</span><span class="token keyword">public</span> <span class="token operator">--</span><span class="token keyword">add</span><span class="token operator">-</span>port<span class="token operator">=</span><span class="token number">21</span><span class="token operator">/</span>tcp

<span class="token operator">--</span> 重启防火墙服务使配置生效 
firewall<span class="token operator">-</span>cmd <span class="token operator">--</span>reload

<span class="token operator">--</span> 查看当前开启的端口号
firewall<span class="token operator">-</span>cmd <span class="token operator">--</span>list<span class="token operator">-</span>port
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="参考文档" tabindex="-1"><a class="header-anchor" href="#参考文档" aria-hidden="true">#</a> 参考文档</h1>`,38),u={href:"https://docs.microsoft.com/zh-cn/virtualization/hyper-v-on-windows/about/",target:"_blank",rel:"noopener noreferrer"};function b(k,v){const e=o("ExternalLinkIcon");return n(),i("div",null,[c,s("p",null,[a("去阿里云下载系统："),s("a",m,[a("http://mirrors.aliyun.com/centos/7/isos/x86_64/"),p(e)])]),g,s("p",null,[a("推荐使用MovaXterm，下载地址**：**"),s("a",d,[a("https://mobaxterm.mobatek.net/"),p(e)]),a(" ，如果有需要可以去网上找汉化版。")]),h,s("p",null,[a("Hyper-v："),s("a",u,[a("https://docs.microsoft.com/zh-cn/virtualization/hyper-v-on-windows/about/"),p(e)])])])}const w=r(l,[["render",b],["__file","hyper-v_install.html.vue"]]);export{w as default};
