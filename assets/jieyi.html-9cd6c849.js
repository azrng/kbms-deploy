import{_ as r}from"./plugin-vue_export-helper-c27b6911.js";import{r as s,o as d,c as l,a as e,b as i,d as a,e as n}from"./app-3c3dee46.js";const c={},o=e("h1",{id:"开篇语",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#开篇语","aria-hidden":"true"},"#"),i(" 开篇语")],-1),p=e("p",null,[i("这两天看见有大佬分享使用钉钉和企业微信的机器人来做通知报警，然后我想到了我使用的另一个第三方软件"),e("strong",null,"捷易快信"),i("(可能大家都不知道这个东西，我也忘了我最开始是咋知道的)，该服务的优点是可以通过微信进行提醒，不过每条需要收费0.0080元，但是不要担心每月可能会赠送4元(因为我的就是)，对于我来说，够我玩了。")],-1),u=e("h1",{id:"注册配置",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#注册配置","aria-hidden":"true"},"#"),i(" 注册配置")],-1),g={href:"http://jy.erpit.cn/login",target:"_blank",rel:"noopener noreferrer"},m=n('<figure><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/1623074832782-048ef9a4-e41c-4fbf-ad27-840cf1813f57.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>我是直接使用的微信进行登录的，看个人爱好进行登录。</p><p>下面模拟一个服务器告警来做一个演示消息通知。</p><figure><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/1623075258900-dda3a98c-8190-46e8-a30f-2dbfcc6d52f2.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>注意看红框的内容，需要让消息接收方扫码关注该公众号</p><h1 id="代码开发" tabindex="-1"><a class="header-anchor" href="#代码开发" aria-hidden="true">#</a> 代码开发</h1><p>查看接口文档</p><figure><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/1623075610320-d9b28f44-5067-424a-b7b9-7abb160b5c26.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>找到我们想要的群发消息接口</p><figure><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/1623076386321-7f9bc26c-1136-44fc-958a-756b10641178.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>也可以通过接口添加删除用户，支持给单独用户推送消息等。</p><p>下面开始编写代码，还在原来的项目上进行添加接口操作。</p>',12),v={href:"https://gitee.com/AZRNG/my-example",target:"_blank",rel:"noopener noreferrer"},b=n(`<p>新建Model类，构建请求参数</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>            var data = new SendMessageVm
            {
                App_key = &quot;xxx&quot;,
                Secret = &quot;xxx&quot;,
                Template_id = &quot;xxx&quot;,
                Data = new SendMessDataVm
                {
                    First = new Details { Value = &quot;服务告警测试&quot; },
                    Keyword1 = new Details { Value = &quot;告警服务器地址：上海&quot; },
                    Keyword2 = new Details { Value = &quot;原因：数据库连接不上&quot; },
                    Keyword3 = new Details { Value = &quot;当前服务：拼团活动&quot; },
                    Remark = new Details { Value = $&quot;当前时间{DateTime.Now:yy:MM:dd HH:mm:ss} 请工程师尽快查看！&quot; }
                }
            };
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Model类有点长就不粘贴了，需要的话可以去下载源码查看。</p><p>通过post形式去请求该接口，本次示例为了方便起见，我直接使用了自己学习使用的Nuget包：<strong>Common.RestSharpClient</strong></p><p>ConfigureServices注入服务</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>services.AddHttpClientService();
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>控制器依赖注入服务</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>        private readonly IHttpClientHelper _httpClientHelper;

        public InformController(IHttpClientHelper httpClientHelper)
        {
            _httpClientHelper = httpClientHelper;
        }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>请求接口</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>var result = await _httpClientHelper.PostAsync&lt;string&gt;(&quot;http://jy.erpit.cn/api/message/send&quot;, data).ConfigureAwait(false);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>请求返回参数</p><figure><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/1623077634012-53139f69-8c9d-4eb6-8187-1b620c0ab5af.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>查看微信是否有消息通知</p><figure><img src="https://gitee.com/AZRNG/picture-storage/raw/master/kbms/1623077689170-8326eccd-df62-4903-85db-b6384a8f522a.png" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>本次示例到此结束。</p><h1 id="结束" tabindex="-1"><a class="header-anchor" href="#结束" aria-hidden="true">#</a> 结束</h1><p>通过这次演示才发现还可以推荐用户，然后将得到您推荐用户消费金额的10%作为奖励，不过免费的已经够我用了，哈哈。我也想像那些大佬一样为社区做出一些贡献，为dotNet社区发展添砖加瓦，虽然我菜，但是我可以搬砖呀，搬砖也是做贡献的。</p>`,17);function f(h,x){const t=s("ExternalLinkIcon");return d(),l("div",null,[o,p,u,e("p",null,[i("访问网址："),e("a",g,[i("http://jy.erpit.cn/login"),a(t)])]),m,e("p",null,[i("代码仓库地址："),e("a",v,[i("https://gitee.com/AZRNG/my-example"),a(t)]),i(" 需要请自取")]),b])}const w=r(c,[["render",f],["__file","jieyi.html.vue"]]);export{w as default};
