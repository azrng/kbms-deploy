import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,d as n,o as e}from"./app-BQsqMNmR.js";const t={};function l(h,s){return e(),a("div",null,s[0]||(s[0]=[n(`<h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h2><p>NuGet 是免费、开源的包管理开发工具，专注于在 .NET 应用开发过程中，简单地合并第三方的组件库。</p><p>官方文档：<a href="https://learn.microsoft.com/zh-cn/nuget/what-is-nuget" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/zh-cn/nuget/what-is-nuget</a><br> Nuget上不错的库、工具、框架集合：<a href="https://dotnet.libhunt.com/" target="_blank" rel="noopener noreferrer">https://dotnet.libhunt.com/</a></p><h2 id="常用命令" tabindex="-1"><a class="header-anchor" href="#常用命令"><span>常用命令</span></a></h2><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">//</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 将包更新到最新版本</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Update-Package</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">//</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 重新安装所有包</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Update-Package</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -reinstall</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">--</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 指定项目重新安装</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Update-Package</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -reinstall</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -Project</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ProjectName</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="包源" tabindex="-1"><a class="header-anchor" href="#包源"><span>包源</span></a></h2><p>默认的源地址为：<a href="https://api.nuget.org/v3/index.json" target="_blank" rel="noopener noreferrer">https://api.nuget.org/v3/index.json </a><br> 国内的源：<a href="https://nuget.cdn.azure.cn/v3/index.json" target="_blank" rel="noopener noreferrer">https://nuget.cdn.azure.cn/v3/index.json </a><br> 华为Nuget源：<a href="https://repo.huaweicloud.com/repository/nuget/v3/index.json" target="_blank" rel="noopener noreferrer">https://repo.huaweicloud.com/repository/nuget/v3/index.json</a><br> 龙芯Nuget源 ：<a href="https://nuget.loongnix.cn/" target="_blank" rel="noopener noreferrer">https://nuget.loongnix.cn/</a></p><h3 id="将本地文件夹注册为包源" tabindex="-1"><a class="header-anchor" href="#将本地文件夹注册为包源"><span>将本地文件夹注册为包源</span></a></h3><p>比如你手头有一些Nuget包文件(.nupkg)，你可以在本地磁盘上创建一个合适的文件夹，并将nuget包放入该文件夹中，然后你可以使用cli命令将文件夹设置为引用包源</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dotnet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nuget</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> add</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> C:</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\P</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ackages</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\L</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">ocal</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Local</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="引用包" tabindex="-1"><a class="header-anchor" href="#引用包"><span>引用包</span></a></h2><h3 id="共享框架" tabindex="-1"><a class="header-anchor" href="#共享框架"><span>共享框架</span></a></h3><p>有许多Nuget包默认已经包含在了项目中，这是因为你使用了共享框架。</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Project</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Sdk</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Microsoft.NET.Sdk.Web&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><a href="https://docs.microsoft.com/zh-cn/aspnet/core/release-notes/aspnetcore-3.0?view=aspnetcore-6.0#use-the-aspnet-core-shared-framework" target="_blank" rel="noopener noreferrer">文章</a> 如果你类库想使用AspNetCore的东西可以直接引用</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">ItemGroup</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">  &lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">FrameworkReference</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Include</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Microsoft.AspNetCore.App&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">ItemGroup</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>文档：<a href="https://learn.microsoft.com/zh-cn/aspnet/core/fundamentals/metapackage-app?view=aspnetcore-7.0" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/zh-cn/aspnet/core/fundamentals/metapackage-app?view=aspnetcore-7.0</a></p><h2 id="打包操作" tabindex="-1"><a class="header-anchor" href="#打包操作"><span>打包操作</span></a></h2><h3 id="配置描述" tabindex="-1"><a class="header-anchor" href="#配置描述"><span>配置描述</span></a></h3><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">Version</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">1.0.0</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">Version</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &lt;!--</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">版本信息</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">--&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">PackageReleaseNotes</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">版本 </span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">2.0.1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 更新内容：增加错误信息显示。</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">PackageReleaseNotes</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &lt;!--</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">版本更新内容</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">--&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">Description</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">描述信息</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">Description</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">GeneratePackageOnBuild</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">GeneratePackageOnBuild</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> &lt;!--</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">构建的时候生成包</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">--&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">Title</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">企业微信推送机器人包</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">Title</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">   &lt;!--</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">不会显示到包管理工具，只是提供给开发人员参考</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">--&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>id: 包的唯一标识符。通常与包的名称相对应，用于在安装和引用包时指定。</li><li>version: 包的版本号。推荐使用语义化版本号，例如 1.0.0。</li><li>authors: 包的作者或维护者的姓名或名称。</li><li>owners: 包的所有者或团队的姓名或名称。</li><li>description: 包的详细描述。提供有关包的功能、用途和示例的信息，以便用户了解并决定是否选择该包。</li><li>releaseNotes: 用于指定每个版本的更新说明或发行说明。类似于 <code>&lt;PackageReleaseNotes&gt;</code>，提供了关于包的特定版本的改进、新特性和修复的信息。</li><li>tags: 包的标签。用于描述包的特征和功能，以便用户更容易地搜索和筛选包。</li><li>dependencies: 列出了包依赖关系，即该包需要其他 NuGet 包来正常工作。</li><li>projectUrl: 提供了一个指向包的项目主页或相关文档的 URL。</li><li>licenseUrl: 提供了一个指向包的许可证文件或许可证信息的 URL。</li></ul><h3 id="版本范围" tabindex="-1"><a class="header-anchor" href="#版本范围"><span>版本范围</span></a></h3><p>引用包依赖项时，NuGet 支持使用间隔表示法来指定版本范围，汇总如下：</p><table><thead><tr><th>Notation</th><th>应用的规则</th><th>描述</th></tr></thead><tbody><tr><td>1.0</td><td>x ≥ 1.0</td><td>最低版本（包含）</td></tr><tr><td>(1.0,)</td><td>x &gt; 1.0</td><td>最低版本（独占）</td></tr><tr><td>[1.0]</td><td>x == 1.0</td><td>精确的版本匹配</td></tr><tr><td><code>(,1.0]</code></td><td>x ≤ 1.0</td><td>最高版本（包含）</td></tr><tr><td>(,1.0)</td><td>x &lt; 1.0</td><td>最高版本（独占）</td></tr><tr><td>[1.0,2.0]</td><td>1.0 ≤ x ≤ 2.0</td><td>精确范围（包含）</td></tr><tr><td>(1.0,2.0)</td><td>1.0 &lt; x &lt; 2.0</td><td>精确范围（独占）</td></tr><tr><td><code>[1.0,2.0)</code></td><td>1.0 ≤ x &lt; 2.0</td><td>混合了最低版本（包含）和最高版本（独占）</td></tr><tr><td>(1.0)</td><td>无效</td><td>无效</td></tr></tbody></table><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">PackageReference</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Include</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Microsoft.EntityFrameworkCore.Relational&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Version</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[5.0.5,6.0.0)&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> /&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="设置多个目标版本" tabindex="-1"><a class="header-anchor" href="#设置多个目标版本"><span>设置多个目标版本</span></a></h3><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//单个</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">TargetFramework</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">netstandard2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">TargetFramework</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//多个</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">PropertyGroup</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">   &lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">TargetFrameworks</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">netstandard1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">net40</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">net45</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">TargetFrameworks</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">PropertyGroup</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">//使用一个范围内的版本</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">PackageReference</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Include</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Microsoft.EntityFrameworkCore.Relational&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Version</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[5.0.5,6.0.0)&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> /&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>分别对不同的版本引用不同的其他nuget组件</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;!--</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 引用自：</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">netstandard2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  框架 </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">--&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">ItemGroup</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Condition</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&#39;$(TargetFramework)&#39;==&#39;netstandard2.1&#39;&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">  &lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">PackageReference</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Include</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Microsoft.Extensions.DependencyInjection.Abstractions&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Version</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;3.1.9&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">  &lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">PackageReference</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Include</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Microsoft.Extensions.Http&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Version</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;3.1.9&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">  &lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">PackageReference</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Include</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Newtonsoft.Json&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Version</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;12.0.3&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">ItemGroup</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;!--</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> 引用自：</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">net5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  框架 </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">--&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">ItemGroup</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Condition</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&#39;$(TargetFramework)&#39;==&#39;net5.0&#39;&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">  &lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">PackageReference</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Include</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Microsoft.Extensions.DependencyInjection.Abstractions&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Version</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;5.0.0&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">  &lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">PackageReference</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Include</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Microsoft.Extensions.Http&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Version</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;5.0.0&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">  &lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">PackageReference</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Include</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Newtonsoft.Json&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;"> Version</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;13.0.1&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">ItemGroup</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="针对目标框架编译" tabindex="-1"><a class="header-anchor" href="#针对目标框架编译"><span>针对目标框架编译</span></a></h3><p>在库或者应用中，使用预处理器指令编写条件代码，针对各个目标框架进行编译：</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">#</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> NET40</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        Console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WriteLine</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Target framework: .NET Framework 4.0&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">#</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">elif</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> NET45</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        Console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WriteLine</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Target framework: .NET Framework 4.5&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">#</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">else</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E5C07B;">        Console</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WriteLine</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;Target framework: .NET Standard 1.4&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">#</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">endif</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">#</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">if</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> !</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">NETSTANDARD2_1 </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&amp;&amp;</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> !</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">NETSTANDARD2_0</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">xxx</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">#</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">endif</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>.NET 目标框架的预处理器符号的完整列表如下：</p><table><thead><tr><th><strong>目标框架</strong></th><th><strong>符号</strong></th></tr></thead><tbody><tr><td>.NET Framework</td><td>NETFRAMEWORK, NET48, NET472, NET471, NET47, NET462, NET461, NET46, NET452, NET451, NET45, NET40, NET35, NET20</td></tr><tr><td>.NET Standard</td><td>NETSTANDARD, NETSTANDARD2_1, NETSTANDARD2_0, NETSTANDARD1_6, NETSTANDARD1_5, NETSTANDARD1_4, NETSTANDARD1_3, NETSTANDARD1_2, NETSTANDARD1_1, NETSTANDARD1_0</td></tr><tr><td>.NET 5（和 .NET Core）</td><td>NET5_0, NETCOREAPP, NETCOREAPP3_1, NETCOREAPP3_0, NETCOREAPP2_2, NETCOREAPP2_1, NETCOREAPP2_0, NETCOREAPP1_1, NETCOREAPP1_0</td></tr></tbody></table><h3 id="兼容老方法" tabindex="-1"><a class="header-anchor" href="#兼容老方法"><span>兼容老方法</span></a></h3><p>将方法设置为已过期状态</p><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[</span><span style="--shiki-light:#C18401;--shiki-dark:#E5C07B;">Obsolete</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="预发行包" tabindex="-1"><a class="header-anchor" href="#预发行包"><span>预发行包</span></a></h3><p>为了支持软件的版本生命周期，NuGet 1.6 及更高版本允许分配预发行包，其中的版本号包括语义化版本控制后缀，如 -alpha、-beta 或 -rc。</p><ul><li>-alpha：Alpha 版本，通常用于在制品和试验品</li><li>-beta：Beta 版本，通常指可用于下一计划版本的功能完整的版本，但可能包含已知 bug。</li><li>-rc：候选发布，通常可能为最终（稳定）版本，除非出现重大 bug。</li></ul><div class="language-csharp line-numbers-mode" data-highlighter="shiki" data-ext="csharp" data-title="csharp" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">PropertyGroup</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">    &lt;</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">PackageVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span><span style="--shiki-light:white;--shiki-dark:#FFFFFF;">1.0.1</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">alpha</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">PackageVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&lt;/</span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">PropertyGroup</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="语义化版本控制" tabindex="-1"><a class="header-anchor" href="#语义化版本控制"><span>语义化版本控制</span></a></h3><p>语义化版本控制规范：<a href="https://semver.org/lang/zh-CN/" target="_blank" rel="noopener noreferrer">https://semver.org/lang/zh-CN/</a></p><p>有一种称为“语义化版本控制”的行业标准。 语义化版本控制是指如何表达你或其他开发人员向库引入的更改类型。 语义化版本控制的工作原理是确保包具有版本号，并且该版本号划分为以下部分：</p><ul><li><strong>主版本</strong>。 最左边的数字。 例如 1.0.0 中的 1。 此数字发生更改意味着代码可能出现中断性变更。 可能需要重写部分代码。</li><li><strong>次要版本</strong>。 中间的数字。 例如 1.2.0 中的 2。 此数字发生更改意味着添加了新功能。 你的代码仍可正常工作。 接受更新通常是安全的。</li><li><strong>修补程序版本</strong>。 最右边的数字。 例如 1.2.3 中的 3。 此数字发生更改意味着应用了一个更改，修复了代码中应正常工作的内容。 接受更新应是安全的。</li></ul><p>下表说明了每个版本类型的版本号如何更改：<br> 使用语义化版本控制</p><table><thead><tr><th>类型</th><th>发生的更改</th></tr></thead><tbody><tr><td>主版本</td><td>1.0.0 更改为 2.0.0</td></tr><tr><td>次要版本</td><td>1.1.1 更改为 1.2.0</td></tr><tr><td>修补程序版本</td><td>1.0.1 更改为 1.0.2</td></tr></tbody></table><h3 id="创建仅源nuget包" tabindex="-1"><a class="header-anchor" href="#创建仅源nuget包"><span>创建仅源Nuget包</span></a></h3><p>文档：<a href="https://andrewlock.net/creating-source-only-nuget-packages/" target="_blank" rel="noopener noreferrer">https://andrewlock.net/creating-source-only-nuget-packages/</a></p><h2 id="发布程序包" tabindex="-1"><a class="header-anchor" href="#发布程序包"><span>发布程序包</span></a></h2><p>可以通过网页的方式进行上传或者使用命令行的方式进行发布包</p><h3 id="命令行推送" tabindex="-1"><a class="header-anchor" href="#命令行推送"><span>命令行推送</span></a></h3><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" data-title="shell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">//</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $apikey</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 替换为你的apikey</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dotnet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nuget</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> push</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ./bin/Release/GuiH.ClassLibrary.1.0.0.nupkg</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -k</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $apikey</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://api.nuget.org/v3/index.json</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --skip-duplicate</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="编写-powershell-脚本" tabindex="-1"><a class="header-anchor" href="#编写-powershell-脚本"><span>编写 PowerShell 脚本</span></a></h3><p>文件 <code>push_packages.ps1</code> 内容编写如下：用于将指定目录中的所有 <code>.nupkg</code> 文件推送到指定的 <code>NuGet</code> 服务器。</p><div class="language-powershell line-numbers-mode" data-highlighter="shiki" data-ext="powershell" data-title="powershell" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 定义要推送的目录和 NuGet 服务器 URL</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$directoryPath</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;./output/packages&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$nugetServerUrl</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;https://localhost:5000/v3/index.json&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$apiKey</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 获取目录中的所有 .nupkg 文件</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$nupkgFiles</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> Get-ChildItem</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Path </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$directoryPath</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> -</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">Filter </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.nupkg</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 推送每个 .nupkg 文件到 NuGet 服务器</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">foreach</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$nupkgFile</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> in</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $nupkgFiles</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) {</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    Write-Host</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;Pushing </span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">$(</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">$</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">nupkgFile.FullName</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to </span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">$</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">nugetServerUrl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        dotnet nuget push </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$nupkgFile.FullName</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> --</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">source </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$nugetServerUrl</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">  --</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">api</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">key </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$apiKey</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> --</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">skip-duplicate</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    } </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">catch</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">        Write-Host</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;Failed to push </span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">$(</span><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">$</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">nupkgFile.FullName</span><span style="--shiki-light:#CA1243;--shiki-dark:#C678DD;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">: $_&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="bash脚本" tabindex="-1"><a class="header-anchor" href="#bash脚本"><span>Bash脚本</span></a></h3><p>文件 <code>push_packages.bash</code> 内容编写如下：用于将指定目录中的所有 <code>.nupkg</code> 文件推送到指定的 <code>NuGet</code> 服务器。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 定义要推送的目录和NuGet服务器URL</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">directory_path</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;./output/packages&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">nuget_server_url</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;https://localhost:5000/v3/index.json&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">api_key</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 获取目录中的所有 .nupkg 文件</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">nupkg_files</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">find</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$directory_path</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> f</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -name</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;*.nupkg&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 推送每个 .nupkg 文件到 NuGet 服务器</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> nupkg_file</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> in</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> $nupkg_files</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">do</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;Pushing </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$nupkg_file</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$nuget_server_url</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    if</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> dotnet</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nuget</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> push</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$nupkg_file</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$nuget_server_url</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --api-key</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$api_key</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --skip-duplicate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">; </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">then</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">        echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;Successfully pushed </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$nupkg_file</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    else</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">        echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;Failed to push </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$nupkg_file</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    fi</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">done</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="开源项目" tabindex="-1"><a class="header-anchor" href="#开源项目"><span>开源项目</span></a></h3><p>Jester.Tools.Nuget：<a href="https://github.com/NMSAzulX/Jester.Tools.Nuget" target="_blank" rel="noopener noreferrer">https://github.com/NMSAzulX/Jester.Tools.Nuget</a></p><p>基于.Net的Nuget包发版工具：<a href="https://mp.weixin.qq.com/s/PVhEsUA8F4yx12fiu8TopQ" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/PVhEsUA8F4yx12fiu8TopQ</a></p><h2 id="其他包管理平台" tabindex="-1"><a class="header-anchor" href="#其他包管理平台"><span>其他包管理平台</span></a></h2><p><a href="https://gitcode.com/fsprojects/Paket/overview" target="_blank" rel="noopener noreferrer">Paket</a></p><h2 id="renovate-正则表达式管理器" tabindex="-1"><a class="header-anchor" href="#renovate-正则表达式管理器"><span>Renovate 正则表达式管理器</span></a></h2><p>文档：<a href="https://docs.renovatebot.com/" target="_blank" rel="noopener noreferrer">https://docs.renovatebot.com/</a></p><p>使用 Renovate 在 .NET 项目中自动更新 NuGet 包版本范围<a href="https://dev.to/asimmon/automated-nuget-package-version-range-updates-in-net-projects-using-renovate-15il%E5%A6%82%E6%9E%9C%E5%9C%A8%E4%BD%BF%E7%94%A8" target="_blank" rel="noopener noreferrer">https://dev.to/asimmon/automated-nuget-package-version-range-updates-in-net-projects-using-renovate-15il如果在使用</a> Renovate 更新 NuGet 包版本时将版本指定为范围，该怎么办。</p><h2 id="参考文档" tabindex="-1"><a class="header-anchor" href="#参考文档"><span>参考文档</span></a></h2><p>官网地址：<a href="https://docs.microsoft.com/zh-cn/nuget/what-is-nuget" target="_blank" rel="noopener noreferrer">https://docs.microsoft.com/zh-cn/nuget/what-is-nuget</a><br> 版本与版本后缀以及包版本说明：<a href="https://andrewlock.net/version-vs-versionsuffix-vs-packageversion-what-do-they-all-mean/" target="_blank" rel="noopener noreferrer">https://andrewlock.net/version-vs-versionsuffix-vs-packageversion-what-do-they-all-mean/</a></p><p><a href="https://medium.com/workleap/preventing-breaking-changes-in-net-class-libraries-e61ae93b1b46" target="_blank" rel="noopener noreferrer">https://medium.com/workleap/preventing-breaking-changes-in-net-class-libraries-e61ae93b1b46</a> | 防止 .NET 类库中的重大更改</p>`,70)]))}const r=i(t,[["render",l],["__file","index.html.vue"]]),d=JSON.parse('{"path":"/dotnet/nuget/","title":"说明","lang":"zh-CN","frontmatter":{"title":"说明","lang":"zh-CN","date":"2023-10-04T00:00:00.000Z","publish":true,"author":"azrng","isOriginal":true,"category":["dotNET"],"tag":["nuget"],"filename":"readme","slug":"sayo55","docsId":"30338157","description":"概述 NuGet 是免费、开源的包管理开发工具，专注于在 .NET 应用开发过程中，简单地合并第三方的组件库。 官方文档：https://learn.microsoft.com/zh-cn/nuget/what-is-nuget Nuget上不错的库、工具、框架集合：https://dotnet.libhunt.com/ 常用命令 包源 默认的源地址为...","head":[["meta",{"property":"og:url","content":"https://azrng.gitee.io/kbms/kbms/dotnet/nuget/"}],["meta",{"property":"og:site_name","content":"知识库"}],["meta",{"property":"og:title","content":"说明"}],["meta",{"property":"og:description","content":"概述 NuGet 是免费、开源的包管理开发工具，专注于在 .NET 应用开发过程中，简单地合并第三方的组件库。 官方文档：https://learn.microsoft.com/zh-cn/nuget/what-is-nuget Nuget上不错的库、工具、框架集合：https://dotnet.libhunt.com/ 常用命令 包源 默认的源地址为..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-01-07T15:21:19.000Z"}],["meta",{"property":"article:author","content":"azrng"}],["meta",{"property":"article:tag","content":"nuget"}],["meta",{"property":"article:published_time","content":"2023-10-04T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-01-07T15:21:19.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"说明\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-10-04T00:00:00.000Z\\",\\"dateModified\\":\\"2025-01-07T15:21:19.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"azrng\\"}]}"]]},"headers":[{"level":2,"title":"概述","slug":"概述","link":"#概述","children":[]},{"level":2,"title":"常用命令","slug":"常用命令","link":"#常用命令","children":[]},{"level":2,"title":"包源","slug":"包源","link":"#包源","children":[{"level":3,"title":"将本地文件夹注册为包源","slug":"将本地文件夹注册为包源","link":"#将本地文件夹注册为包源","children":[]}]},{"level":2,"title":"引用包","slug":"引用包","link":"#引用包","children":[{"level":3,"title":"共享框架","slug":"共享框架","link":"#共享框架","children":[]}]},{"level":2,"title":"打包操作","slug":"打包操作","link":"#打包操作","children":[{"level":3,"title":"配置描述","slug":"配置描述","link":"#配置描述","children":[]},{"level":3,"title":"版本范围","slug":"版本范围","link":"#版本范围","children":[]},{"level":3,"title":"设置多个目标版本","slug":"设置多个目标版本","link":"#设置多个目标版本","children":[]},{"level":3,"title":"针对目标框架编译","slug":"针对目标框架编译","link":"#针对目标框架编译","children":[]},{"level":3,"title":"兼容老方法","slug":"兼容老方法","link":"#兼容老方法","children":[]},{"level":3,"title":"预发行包","slug":"预发行包","link":"#预发行包","children":[]},{"level":3,"title":"语义化版本控制","slug":"语义化版本控制","link":"#语义化版本控制","children":[]},{"level":3,"title":"创建仅源Nuget包","slug":"创建仅源nuget包","link":"#创建仅源nuget包","children":[]}]},{"level":2,"title":"发布程序包","slug":"发布程序包","link":"#发布程序包","children":[{"level":3,"title":"命令行推送","slug":"命令行推送","link":"#命令行推送","children":[]},{"level":3,"title":"编写 PowerShell 脚本","slug":"编写-powershell-脚本","link":"#编写-powershell-脚本","children":[]},{"level":3,"title":"Bash脚本","slug":"bash脚本","link":"#bash脚本","children":[]},{"level":3,"title":"开源项目","slug":"开源项目","link":"#开源项目","children":[]}]},{"level":2,"title":"其他包管理平台","slug":"其他包管理平台","link":"#其他包管理平台","children":[]},{"level":2,"title":"Renovate 正则表达式管理器","slug":"renovate-正则表达式管理器","link":"#renovate-正则表达式管理器","children":[]},{"level":2,"title":"参考文档","slug":"参考文档","link":"#参考文档","children":[]}],"git":{"createdTime":1697962303000,"updatedTime":1736263279000,"contributors":[{"name":"azrng","username":"azrng","email":"itzhangyunpeng@163.com","commits":10},{"name":"zhangyunpeng","username":"zhangyunpeng","email":"zhang.yunpeng@synyi.com","commits":1}]},"readingTime":{"minutes":6.9,"words":2069},"filePathRelative":"dotnet/nuget/readme.md","localizedDate":"2023年10月4日","excerpt":"<h2>概述</h2>\\n<p>NuGet 是免费、开源的包管理开发工具，专注于在 .NET 应用开发过程中，简单地合并第三方的组件库。</p>\\n<p>官方文档：<a href=\\"https://learn.microsoft.com/zh-cn/nuget/what-is-nuget\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://learn.microsoft.com/zh-cn/nuget/what-is-nuget</a><br>\\nNuget上不错的库、工具、框架集合：<a href=\\"https://dotnet.libhunt.com/\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">https://dotnet.libhunt.com/</a></p>","autoDesc":true}');export{r as comp,d as data};
